function append(e){e.ref&&this.root.appendChild(e.ref)}function updatePun(e){var t=e[1],r=e[0],o=e[2],n=r(this.model);o!==n&&("INPUT"===this.root.tagName&&"object"==typeof t&&"value"===t.name&&this.root.value!==n?this.root.value=n:"object"==typeof t?t.nodeValue=n:this.root.setAttribute(t,n),e[2]=n)}function passModel(e){e(this.model)}function attachEvHandlers(e){this.root.addEventListener(e,this.props.ev[e])}function setAttribute(e){if("ev"===e)Object.keys(this.props.ev).forEach(attachEvHandlers,this);else if("function"==typeof this.props[e]){var t=document.createAttribute(e);this.puns.push([this.props[e],t,null]),this.root.setAttributeNode(t)}else this.root.setAttribute(e,this.props[e])}function h(e,t,r){var o=document.createElement(e),n=[];t&&Object.keys(t).forEach(setAttribute,{root:o,props:t,puns:n});if(Array.isArray(r))r.forEach(append,{root:o});else if("function"==typeof r){var i=document.createTextNode("");o.appendChild(i),n.push([r,i,null])}else r&&o.appendChild(document.createTextNode(r));var a=function(e){n.forEach(updatePun,{model:e,root:o}),Array.isArray(r)&&r.forEach(passModel,{model:e})};return a.ref=o,a}function hIf(e,t,r){var o=!1,n=function(n){e(n),r(n);var i=t(n);o?i||(e.ref.removeChild(r.ref),o=!1):i&&(e.ref.appendChild(r.ref),o=!0)};return n.ref=e.ref,n}function hFor(e,t,r,o,n){var i=[],a=[],f=function(f){e(f);var s,u=t(f);u.forEach((function(t,f){i[f]!==t&&(a[f]?a[f]({index:f,item:t}):((s=h(r,o,"function"==typeof n?n():n))({index:f,item:t}),a.push(s),e.ref.appendChild(s.ref)))}));var p=i.length,c=u.length;if(p>c){var d=p-c;for(a.splice(c);d--;)e.ref.removeChild(e.ref.children[c])}i=u.slice()};return f.ref=e.ref,f}function _prop(e){return function(t){return t[e]}}