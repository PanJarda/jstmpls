function updatePun(e){var t=e.node,r=e.fn(this.model);e.old!==r&&("object"==typeof t?"INPUT"===this.root.tagName&&"value"===t.name&&this.root.value!==r?this.root.value=r:t.nodeValue=r:this.root.setAttribute(t,r),e.old=r)}function attachEvHandlers(e){this.root.addEventListener(e,this.props.ev[e])}function setAttribute(e){if("ev"!==e){if("function"==typeof this.props[e]){var t=document.createAttribute(e);return this.puns.push({fn:this.props[e],node:t}),void this.root.setAttributeNode(t)}this.root.setAttribute(e,this.props[e])}else{Object.keys(this.props.ev).forEach(attachEvHandlers,this)}}function h(e,t,r){var o=document.createElement(e),n=[];switch(t&&Object.keys(t).forEach(setAttribute,{root:o,props:t,puns:n}),typeof r){case"string":o.appendChild(document.createTextNode(r));break;case"function":var i=document.createTextNode("");o.appendChild(i),n.push({fn:r,node:i});break;case"object":for(var a=r.length,f=0;f<a;f++)o.appendChild(r[f].ref)}var s=function(e){if(n.forEach(updatePun,{model:e,root:o}),"object"==typeof r)for(var t in r)r[t](e)};return s.ref=o,s.update=s,s}function hIf(e,t,r){var o=!1,n=function(n){e(n);var i=t(n);i&&r(n),o&&!i?(e.ref.removeChild(r.ref),o=!1):i&&(e.ref.appendChild(r.ref),o=!0)};return n.ref=e.ref,n.update=n,n}function hFor(e,t,r){var o=[],n=[],i=function(i){e(i);for(var a,f,s=t(i),u=s.length,d=0;d<u;d++)f=s[d],o[d]!==f&&(n[d]?n[d]({index:d,item:f}):((a=r())({index:d,item:f}),n.push(a),e.ref.appendChild(a.ref)));var h=o.length,p=s.length;if(h>p)for(d=h-p,n.splice(p);d--;)e.ref.removeChild(e.ref.children[p]);o=s.slice()};return i.ref=e.ref,i.update=i,i}