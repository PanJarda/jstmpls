function daysInMonth(t,e){var n=30+(e+Math.floor(e/8))%2;return 2==e?n-2+Math.pow(0,t%4)-Math.pow(0,t%100)+Math.pow(0,t%400):n}function recalcDays(t){var e=t.year,n=t.month,a=t.day,r=(new Date(e,n-1,1).getDay()+6)%7;console.log(r);var o=daysInMonth(e,n);a>o&&(a=1);for(var c=t.days,h=0;h<r;h++)c[h]=undefined;for(h=r+o-1;h<42;h++)c[h]=undefined;for(h=1;h<=o;h++)c[h+r-1]=h;t.active=a+r-1}function main(){var t=new Date,e={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),active:1,days:[]};recalcDays(e);var n=e,a=!1;function r(t){return function(e){return e[t]}}function o(t){var e=parseInt(t.target.getAttribute("data-index"));n.active=e,n.day=parseInt(t.target.innerText),console.log(t.target.innerText),i()}function c(t){return h("td",{"class":(e=t,function(t){return e===t.active?"active":""}),"data-index":t,ev:{click:o}},function(t){return function(e){return e.days[t]}}(t));var e}var d=h("div",a,[h("button",{ev:{click:function(){var t=new Date;n.year=t.getFullYear(),n.month=t.getMonth()+1,n.day=t.getDate(),recalcDays(n),i()}}},"Now"),h("table",a,[h("tr",a,[h("td",a,"Year:"),h("td",a,r("year")),h("td",a,[h("button",{ev:{click:function(t){n.year--,recalcDays(n),i()}}},"Prev"),h("button",{ev:{click:function(t){n.year++,recalcDays(n),i()}}},"Next")])]),h("tr",a,[h("td",a,"Month:"),h("td",a,r("month")),h("td",a,[h("button",{ev:{click:function(){1===n.month&&n.year--,n.month=(n.month+10)%12+1,recalcDays(n),i()}}},"Prev"),h("button",{ev:{click:function(t){12===n.month&&n.year++,n.month=n.month%12+1,recalcDays(n),i()}}},"Next")])]),h("tr",a,[h("td",a,"Day:"),h("td",a,r("day"))])]),h("table",{"class":"calendar",colspacing:0},[h("tr",a,[h("td",a,"Po"),h("td",a,"Út"),h("td",a,"St"),h("td",a,"Čt"),h("td",a,"Pá"),h("td",a,"So"),h("td",a,"Ne")]),h("tr",a,[c(0),c(1),c(2),c(3),c(4),c(5),c(6)]),h("tr",a,[c(7),c(8),c(9),c(10),c(11),c(12),c(13)]),h("tr",a,[c(14),c(15),c(16),c(17),c(18),c(19),c(20)]),h("tr",a,[c(21),c(22),c(23),c(24),c(25),c(26),c(27)]),h("tr",a,[c(28),c(29),c(30),c(31),c(32),c(33),c(34)]),h("tr",a,[c(35),c(36),c(37),c(38),c(39),c(40),c(41)])])]);function i(t){console.log(d),d.update(t||n)}i();var u=document.getElementById("app");u.innerHTML="",u.appendChild(d.ref)}window.addEventListener?window.addEventListener("load",main,!1):window.attachEvent&&(document.onreadystatechange=new function(){"complete"!==document.readyState&&"interactive"!==document.readyState||main()});