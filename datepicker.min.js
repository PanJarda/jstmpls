function daysInMonth(t,a){var e=30+(a+Math.floor(a/8))%2;return 2==a?e-2+Math.pow(0,t%4)-Math.pow(0,t%100)+Math.pow(0,t%400):e}function recalcDays(t){var a=t.year,e=t.month,c=t.day,d=(new Date(a,e-1,1).getDay()+6)%7;console.log(d);for(var n=daysInMonth(a,e),i=t.days,l=0;l<d;l++)i[l]=undefined;for(l=d+n-1;l<42;l++)i[l]=undefined;for(l=1;l<=n;l++)i[l+d-1]=l;t.active=c+d-1}function main(){var t=new Date,a={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),active:1,days:[]};recalcDays(a);var e=a,c=!1;function d(t){return function(a){return a[t]}}function n(t){return function(a){return a.days[t]}}function i(t){return function(a){return t===a.active?"active":""}}function l(t){var a=parseInt(t.target.getAttribute("data-index"));e.active=a,e.day=parseInt(t.target.innerText),console.log(t.target.innerText),r()}var s=h("div",c,[h("button",{ev:{click:function(){var t=new Date;e.year=t.getFullYear(),e.month=t.getMonth()+1,e.day=t.getDate(),recalcDays(e),r()}}},"Now"),h("table",c,[h("tr",c,[h("td",c,"Year:"),h("td",c,d("year")),h("td",c,[h("button",{ev:{click:function(t){e.year--,recalcDays(e),r()}}},"Prev"),h("button",{ev:{click:function(t){e.year++,recalcDays(e),r()}}},"Next")])]),h("tr",c,[h("td",c,"Month:"),h("td",c,d("month")),h("td",c,[h("button",{ev:{click:function(){1===e.month&&e.year--,e.month=(e.month+10)%12+1,recalcDays(e),r()}}},"Prev"),h("button",{ev:{click:function(t){12===e.month&&e.year++,e.month=e.month%12+1,recalcDays(e),r()}}},"Next")])]),h("tr",c,[h("td",c,"Day:"),h("td",c,d("day"))])]),h("table",{"class":"calendar",colspacing:0},[h("tr",c,[h("td",c,"Po"),h("td",c,"Út"),h("td",c,"St"),h("td",c,"Čt"),h("td",c,"Pá"),h("td",c,"So"),h("td",c,"Ne")]),h("tr",c,[h("td",{"class":i(0),"data-index":0,ev:{click:l}},n(0)),h("td",{"class":i(1),"data-index":1,ev:{click:l}},n(1)),h("td",{"class":i(2),"data-index":2,ev:{click:l}},n(2)),h("td",{"class":i(3),"data-index":3,ev:{click:l}},n(3)),h("td",{"class":i(4),"data-index":4,ev:{click:l}},n(4)),h("td",{"class":i(5),"data-index":5,ev:{click:l}},n(5)),h("td",{"class":i(6),"data-index":6,ev:{click:l}},n(6))]),h("tr",c,[h("td",{"class":i(7),"data-index":7,ev:{click:l}},n(7)),h("td",{"class":i(8),"data-index":8,ev:{click:l}},n(8)),h("td",{"class":i(9),"data-index":9,ev:{click:l}},n(9)),h("td",{"class":i(10),"data-index":10,ev:{click:l}},n(10)),h("td",{"class":i(11),"data-index":11,ev:{click:l}},n(11)),h("td",{"class":i(12),"data-index":12,ev:{click:l}},n(12)),h("td",{"class":i(13),"data-index":13,ev:{click:l}},n(13))]),h("tr",c,[h("td",{"class":i(14),"data-index":14,ev:{click:l}},n(14)),h("td",{"class":i(15),"data-index":15,ev:{click:l}},n(15)),h("td",{"class":i(16),"data-index":16,ev:{click:l}},n(16)),h("td",{"class":i(17),"data-index":17,ev:{click:l}},n(17)),h("td",{"class":i(18),"data-index":18,ev:{click:l}},n(18)),h("td",{"class":i(19),"data-index":19,ev:{click:l}},n(19)),h("td",{"class":i(20),"data-index":20,ev:{click:l}},n(20))]),h("tr",c,[h("td",{"class":i(21),"data-index":21,ev:{click:l}},n(21)),h("td",{"class":i(22),"data-index":22,ev:{click:l}},n(22)),h("td",{"class":i(23),"data-index":23,ev:{click:l}},n(23)),h("td",{"class":i(24),"data-index":24,ev:{click:l}},n(24)),h("td",{"class":i(25),"data-index":25,ev:{click:l}},n(25)),h("td",{"class":i(26),"data-index":26,ev:{click:l}},n(26)),h("td",{"class":i(27),"data-index":27,ev:{click:l}},n(27))]),h("tr",c,[h("td",{"class":i(28),"data-index":28,ev:{click:l}},n(28)),h("td",{"class":i(29),"data-index":29,ev:{click:l}},n(29)),h("td",{"class":i(30),"data-index":30,ev:{click:l}},n(30)),h("td",{"class":i(31),"data-index":31,ev:{click:l}},n(31)),h("td",{"class":i(32),"data-index":32,ev:{click:l}},n(32)),h("td",{"class":i(33),"data-index":33,ev:{click:l}},n(33)),h("td",{"class":i(34),"data-index":34,ev:{click:l}},n(34))]),h("tr",c,[h("td",{"class":i(35),"data-index":35,ev:{click:l}},n(35)),h("td",{"class":i(36),"data-index":36,ev:{click:l}},n(36)),h("td",{"class":i(37),"data-index":37,ev:{click:l}},n(37)),h("td",{"class":i(38),"data-index":38,ev:{click:l}},n(38)),h("td",{"class":i(39),"data-index":39,ev:{click:l}},n(39)),h("td",{"class":i(40),"data-index":40,ev:{click:l}},n(40)),h("td",{"class":i(41),"data-index":41,ev:{click:l}},n(41))])])]);function r(t){console.log(s),s.update(t||e)}r();var o=document.getElementById("app");o.innerHTML="",o.appendChild(s.ref)}window.addEventListener?window.addEventListener("load",main,!1):window.attachEvent&&(document.onreadystatechange=new function(){"complete"!==document.readyState&&"interactive"!==document.readyState||main()});