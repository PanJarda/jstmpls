function Element(e,r,t){var n=this;for(var o in n.puns=[],n.ref=document.createElement(e),n.children=t,r)n.setAttribute(o,r[o]);switch(typeof t){case"string":n.ref.appendChild(document.createTextNode(t));break;case"function":var i=document.createTextNode("");n.ref.appendChild(i),n.puns.push({fn:t,node:i});break;case"object":for(var a=t.length,d=0;d<a;d++)n.ref.appendChild(t[d].ref)}}function CombinatorIf(e,r,t){var n=this;n.parent=e,n.appended=!1,n.ref=e.ref,n.cond=r,n.child=t,n.ref=e.ref}function CombinatorFor(e,r,t){var n=this;n.old=[],n.children=[],n.parent=e,n.arrFn=r,n.childFactory=t,n.ref=e.ref}function h(e,r,t){return new Element(e,r,t)}function hIf(e,r,t){return new CombinatorIf(e,r,t)}function hFor(e,r,t){return new CombinatorFor(e,r,t)}Element.prototype={setAttribute:function(e,r){var t=this;if("ev"!==e){if("function"==typeof r){var n=document.createAttribute(e);return t.puns.push({fn:r,node:n}),void t.ref.setAttributeNode(n)}t.ref.setAttribute(e,r)}else for(var o in r)t.ref.addEventListener(o,r[o])},update:function(e){var r=this;if(r.puns.forEach((function(t){var n=t.node,o=t.fn(e);t.old!==o&&("object"==typeof n?"INPUT"===r.ref.tagName&&"value"===n.name&&r.ref.value!==o?r.ref.value=o:n.nodeValue=o:r.ref.setAttribute(n,o),t.old=o)})),"object"==typeof r.children)for(var t in r.children)r.children[t].update(e)}},CombinatorIf.prototype.update=function(e){var r=this,t=r.child,n=r.parent,o=r.cond(e);n.update(e),o&&t.update(e),r.appended&&!o?(n.ref.removeChild(t.ref),r.appended=!1):o&&(n.ref.appendChild(t.ref),r.appended=!0)},CombinatorFor.prototype.update=function(e){var r=this;r.parent.update(e);for(var t,n,o=r.arrFn(e),i=o.length,a=0;a<i;a++)n=o[a],r.old[a]!==n&&(r.children[a]?r.children[a].update({index:a,item:n}):((t=r.childFactory()).update({index:a,item:n}),r.children.push(t),r.parent.ref.appendChild(t.ref)));var d=r.old.length,f=o.length;if(d>f)for(a=d-f,r.children.splice(f);a--;)r.parent.ref.removeChild(r.parent.ref.children[f]);r.old=o.slice()};