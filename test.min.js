var Model={state:{clicks:0,error:"",className:"",show:!0,input:"",itemInputs:[1,2,3,4,5],items:[1,2,3,4,5]}};function main(){var e={clicks:0,error:"",className:"",show:!0,input:"",itemInputs:[],items:[]},t=e;function n(){console.log("loading model"),t=JSON.parse(window.localStorage.getItem("model"))||e,c()}function i(e){var n;console.log("removing item "+e.target.getAttribute("data-index")),t.items.splice(n=1*e.target.getAttribute("data-index"),1),t.itemInputs.splice(n),c()}function o(e){var n=e.target.getAttribute("data-index");t.itemInputs[n]=e.target.value}function a(e){var n=e.target.getAttribute("data-index");t.items[n]=t.itemInputs[n],t.itemInputs[n]="",c()}function s(){window.localStorage&&window.localStorage.setItem("model",JSON.stringify(t))}setTimeout(n,0);var u=!1;function d(e){return function(t){return t[e]}}window.addEventListener("hashchange",(function(){t.show=!t.show,console.log(t.show),c()})),window.addEventListener("storage",n);var r=h("div",{class:"ahoj"},[h("h1",{class:d("className"),ev:{click:function(e){t.className="red"===t.className?"":"red",c()}}},"Ahoj"),h("div",u,[h("p",u,d("clicks"))]),h("span",u,d("error")),h("a",{href:"#prdel",ev:{click:function(e){}}},"link1"),h("hr"),h("button",{ev:{mouseup:function(e){t.clicks++,t.clicks>0&&(t.error="",t.show=!0),c()}}},"   +   "),h("i",u," "),h("button",{ev:{mouseup:function(e){t.clicks--,t.clicks<0&&(t.error="Fok You!",t.show=!1),c()}}},"   -   "),hIf(h("h2",u,"Ahoj"),d("error"),h("span",u,d("error"))),hIf(h("div"),d("show"),h("div",u,[h("div",u,[h("div",u,[h("h1",u,"Ahoj")]),h("div",u,[h("h2",u,"Dalsi ahoj")])])])),hFor(h("ul"),d("items"),(function(){return h("li",u,[h("span",u,d("item")),h("span",u," "),h("input",{value:d("item"),"data-index":d("index"),ev:{change:o}}),h("button",{"data-index":d("index"),ev:{click:a}},"edit"),h("button",{"data-index":d("index"),ev:{mouseup:i}}," X ")])})),h("input",{value:d("input"),ev:{change:function(e){t.input=e.target.value}}}),h("button",{ev:{mouseup:function(e){t.items.push(t.input),t.itemInputs.push(t.input),t.input="",c()}}},"add Item")]);function c(e){setTimeout(s,0),"update"in r?r.update(e||t):r(e||t)}"update"in r?r.update(t):r(t);var l=document.getElementById("app");l.innerHTML="",l.appendChild(r.ref)}function route(e){console.log("hashchange")}window.addEventListener?window.addEventListener("load",main,!1):window.attachEvent&&(document.onreadystatechange=new function(){"complete"!==document.readyState&&"interactive"!==document.readyState||main()}),window.addEventListener("popstate",(function(e){console.log("popstate")})),window.addEventListener("hashchange",route);