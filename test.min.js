var Model={state:{clicks:0,error:"",className:"",show:!0,input:"",itemInputs:[1,2,3,4,5],items:[1,2,3,4,5]}};function main(){var e={clicks:0,error:"",className:"",show:!0,input:"",itemInputs:[],items:[]},t=e;function n(){console.log("loading model"),t=JSON.parse(window.localStorage.getItem("model"))||e,d()}function i(e){var n;console.log("removing item "+e.target.getAttribute("data-index")),t.items.splice(n=1*e.target.getAttribute("data-index"),1),t.itemInputs.splice(n),d()}function o(e){var n=e.target.getAttribute("data-index");t.itemInputs[n]=e.target.value}function a(e){var n=e.target.getAttribute("data-index");t.items[n]=t.itemInputs[n],t.itemInputs[n]="",d()}function s(){window.localStorage&&window.localStorage.setItem("model",JSON.stringify(t))}setTimeout(n,0);var u=!1;function r(e){return function(t){return t[e]}}window.addEventListener("hashchange",(function(){t.show=!t.show,console.log(t.show),d()})),window.addEventListener("storage",n);var c=h("div",{"class":"ahoj"},[h("h1",{"class":r("className"),ev:{click:function(e){t.className="red"===t.className?"":"red",d()}}},"Ahoj"),h("div",u,[h("p",u,r("clicks"))]),h("span",u,r("error")),h("a",{href:"#prdel",ev:{click:function(e){}}},"link1"),h("hr"),h("button",{ev:{mouseup:function(e){t.clicks++,t.clicks>0&&(t.error="",t.show=!0),d()}}},"   +   "),h("i",u," "),h("button",{ev:{mouseup:function(e){t.clicks--,t.clicks<0&&(t.error="Fok You!",t.show=!1),d()}}},"   -   "),hIf(h("h2",u,"Ahoj"),r("error"),h("span",u,r("error"))),hIf(h("div"),r("show"),h("div",u,[h("div",u,[h("div",u,[h("h1",u,"Ahoj")]),h("div",u,[h("h2",u,"Dalsi ahoj")])])])),hFor(h("ul"),r("items"),(function(){return h("li",u,[h("span",u,r("item")),h("span",u," "),h("input",{value:r("item"),"data-index":r("index"),ev:{change:o}}),h("button",{"data-index":r("index"),ev:{click:a}},"edit"),h("button",{"data-index":r("index"),ev:{mouseup:i}}," X ")])})),h("input",{value:r("input"),ev:{change:function(e){t.input=e.target.value}}}),h("button",{ev:{mouseup:function(e){t.items.push(t.input),t.itemInputs.push(t.input),t.input="",d()}}},"add Item")]);function d(e){setTimeout(s,0),c.update(e||t)}c.update(t);var l=document.getElementById("app");l.innerHTML="",l.appendChild(c.ref)}function route(e){console.log("hashchange")}window.addEventListener?window.addEventListener("load",main,!1):window.attachEvent&&(document.onreadystatechange=new function(){"complete"!==document.readyState&&"interactive"!==document.readyState||main()}),window.addEventListener("popstate",(function(e){console.log("popstate")})),window.addEventListener("hashchange",route);